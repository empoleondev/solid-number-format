((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("solid-js/web"),require("solid-js")):"function"==typeof define&&define.amd?define(["exports","solid-js/web","solid-js"],t):t((e=e||self).NumberFormat={},e.Solid,e.Solid)})(this,function(e,P,k){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)!{}.hasOwnProperty.call(r,n)||(e[n]=r[n])}return e}).apply(null,arguments)}function j(e,t){return(e=>{if(Array.isArray(e))return e})(e)||((e,t)=>{var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,u,l=[],i=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{if(!i&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw a}}return l}})(e,t)||((e,t)=>{var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0})(e,t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}var O,t;function K(){}function W(e){return!!String(e||"").match(/\d/)}function d(e){return null==e}function s(e){return d(e)||"number"==typeof(t=e)&&isNaN(t)||"number"==typeof e&&!isFinite(e);var t}function g(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function A(e,t,n){var n=(e=>{switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}})(n),r=-1===(r=e.search(/[1-9]/))?e.length:r;return e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+t)}function p(e,t){var n="-"===e[0],t=n&&(!(1<arguments.length&&void 0!==t)||t),e=(e=e.replace("-","")).split(".");return{beforeDecimal:e[0],afterDecimal:e[1]||"",hasNegation:n,addNegation:t}}function f(e,t,n){for(var r="",a=n?"0":"",o=0;o<=t-1;o++)r+=e[o]||a;return r}function a(e,t){return Array(t+1).join(e)}function m(e){var t,e=e+"",n="-"===e[0]?"-":"",e=j((e=n?e.substring(1):e).split(/[eE]/g),2),r=e[0],e=e[1];return(e=Number(e))&&(e=1+e,t=(r=r.replace(".","")).length,e<0?r="0."+a("0",Math.abs(e))+r:t<=e?r+=a("0",e-t):r=(r.substring(0,e)||"0")+"."+r.substring(e)),n+r}function L(e,t){var n;e.value=e.value,null!==e&&(e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus())}(t=O=O||{}).event="event",t.props="prop";o=function(e,t){for(var n=0,r=0,a=e.length,o=t.length;e[n]===t[n]&&n<a;)n++;for(;e[a-1-r]===t[o-1-r]&&n<o-r&&n<a-r;)r++;return{from:{start:n,end:a-r},to:{start:n,end:o-r}}},l=void 0;var o,u,l,G=function(){for(var e=arguments,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=e[r];return u&&n.length===u.length&&n.every(function(e,t){return e===u[t]})||(u=n,l=o.apply(void 0,n)),l};function $(e){return Math.max(e.selectionStart,e.selectionEnd)}function v(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function h(e,t){e=0<arguments.length&&void 0!==e?e:" ";return"string"==typeof e?e:e[1<arguments.length?t:void 0]||" "}function _(e){return e.currentValue[e.currentValueIndex]===e.formattedValue[e.formattedValueIndex]}function U(e,t,n,r){var a,o,u=e.length;if(e=t,a=0,o=u,t=Math.min(Math.max(e,a),o),"left"===r){for(;0<=t&&!n[t];)t--;-1===t&&(t=n.indexOf(!0))}else{for(;t<=u&&!n[t];)t++;u<t&&(t=n.lastIndexOf(!0))}return t=-1===t?u:t}function Z(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=Boolean(W(e[n])||W(e[n-1]));return t}function q(n,e,r,a,o,t){var u,l=5<arguments.length&&void 0!==t?t:K,i=(u=function(e,t){var n,t=s(e)?n="":(n="number"==typeof e||t?"number"==typeof e?m(e):e:o(e,void 0),a(n));return{formattedValue:t,numAsString:n}},function(){return u.apply(void 0,arguments)}),t=i(d(n())?e:n(),r),e=j(k.createSignal(t),2),c=e[0],f=e[1];return k.createEffect(function(){var e=d(n())?c().numAsString:n(),t=!!d(n())||r,e=i(e,t);f(e)}),[c,function(e,t){e.formattedValue!==c().formattedValue&&f({formattedValue:e.formattedValue,numAsString:e.value}),l(e,t)}]}var z=P.template("<span>"),H=P.template("<input>");function J(e){return e.replace(/[^0-9]/g,"")}function Q(e){return e}function n(e){function n(){return y().numAsString}function c(e,t,n){return U(e,t,v(e),n)}function r(e,t,n){var r,a,o=t.target,u=R(R({},i?(u=i,o=o.selectionEnd,{from:{start:l=Math.min(u.selectionStart,o),end:u.selectionEnd},to:{start:l,end:o}}):G(x(),e)),{lastValue:x()}),l=d(e,u),o=I(l),l=d(o,void 0);return s.isAllowed&&!s.isAllowed(T(o,l))?(a=$(r=t.target),a=E(e,x(),a),r.value=x(),F(r,a,x()),!1):(B({formattedValue:o,numAsString:l,inputValue:e,event:t,source:n,input:t.target}),!0)}function f(e){i={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)}}var i,e=j(k.splitProps(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),2),s=e[0],t=e[1],d=null!=(e=s.removeFormatting)?e:J,e=null!=(e=s.format)?e:Q,a=null!=(a=s.type)?a:"text",o=null!=(o=s.displayType)?o:"input",u=null!=(S=s.onChange)?S:K,m=null!=(S=s.onKeyDown)?S:K,l=null!=(S=s.onMouseUp)?S:K,g=null!=(S=s.onFocus)?S:K,p=null!=(S=s.onBlur)?S:K,v=null!=(S=s.getCaretBoundary)?S:Z,h=null!=(S=s.isValidInputCharacter)?S:W,S=j(q(function(){return s.value},s.defaultValue,Boolean(s.valueIsNumericString),e,d,s.onValueChange),2),y=S[0],w=S[1],x=function(){return y().formattedValue},b={formattedValue:x(),numAsString:n()},V=function(e,t){b={formattedValue:e.formattedValue,numAsString:e.value},w(e,t)},S=j(k.createSignal(!1),2),N=S[0],A=S[1],D=null,C={setCaretTimeout:null,focusTimeout:null},I=(k.onMount(function(){A(!0)}),k.onCleanup(function(){clearTimeout(C.setCaretTimeout),clearTimeout(C.focusTimeout)}),e),T=function(e,t){var n=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(n)?void 0:n}},F=function(e,t,n){0===e.selectionStart&&e.selectionEnd===e.value.length||(L(e,t),C.setCaretTimeout=setTimeout(function(){e.value===n&&e.selectionStart!==t&&L(e,t)},0))},E=function(e,t,n){var r=v(t);return U(t,function(e,t,n,r,a,o,u){for(var l=6<arguments.length&&void 0!==u?u:_,u=a.findIndex(function(e){return e}),a=e.slice(0,u),i=(t||n.startsWith(a)||(n=(t=a)+n,r+=a.length),n.length),c=e.length,f={},s=new Array(i),d=0;d<i;d++){s[d]=-1;for(var m=0,g=c;m<g;m++)if(l({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:d,formattedValueIndex:m})&&!0!==f[m]){f[s[d]=m]=!0;break}}for(var p=r;p<i&&(-1===s[p]||!o(n[p]));)p++;for(u=p===i||-1===s[p]?c:s[p],p=r-1;0<p&&-1===s[p];)p--;return a=-1===p||-1===s[p]?0:s[p]+1,!(u<a)&&r-a<u-r?a:u}(t,x(),e,n,r,h,s.isCharacterSame),r)},B=function(e){var t,n,r=null!=(r=e.formattedValue)?r:"";e.input&&(t=e.inputValue||e.input.value,n=$(e.input),e.input.value=r,void 0!==(t=E(t,r,n)))&&F(e.input,t,r),r!==x()&&V(T(r,e.numAsString),{event:e.event,source:e.source})},M=(k.createEffect(function(){var e=b,t=e.formattedValue,e=e.numAsString;x()===t&&n()===e||V(T(x(),n()),{event:void 0,source:O.props})}),D?$(D):void 0),S=(k.onMount(function(){var e,t=D;x()!==b.formattedValue&&t&&(e=E(b.formattedValue,x(),M),t.value=x(),F(t,e,x()))}),R({inputMode:N()&&!("undefined"==typeof navigator||navigator.platform&&/iPhone|iPod/.test(navigator.platform))?"numeric":void 0,type:a,value:x(),onInput:function(e){var t=e.target.value;r(t,e,O.event)&&"function"==typeof u&&u(e),i=void 0},onKeyDown:function(e){var t,n=e.target,r=e.key,a=n.selectionStart,o=n.selectionEnd,u=n.value,u=void 0===u?"":u,l=("ArrowLeft"===r||"Backspace"===r?t=Math.max(a-1,0):"ArrowRight"===r?t=Math.min(a+1,u.length):"Delete"===r&&(t=a),0),i=("Delete"===r&&a===o&&(l=1),"ArrowLeft"===r||"ArrowRight"===r);void 0===t||a!==o&&!i||(a=t,i?(a=c(u,t,"ArrowLeft"===r?"left":"right"))!==t&&e.preventDefault():"Delete"!==r||h(u[t])?"Backspace"!==r||h(u[t])||(a=c(u,t,"left")):a=c(u,t,"right"),a!==t&&F(n,a,u)),"function"==typeof m&&m(e),f(n,l)},onMouseUp:function(e){function t(){var e=r.selectionStart,t=r.selectionEnd,n=void 0===(n=r.value)?"":n;e===t&&(t=c(n,e))!==e&&F(r,t,n)}var r=e.target;t(),requestAnimationFrame(function(){t()}),"function"==typeof l&&l(e),f(r)},onFocus:function(a){var o=a.target,u=a.currentTarget;D=o,C.focusTimeout=setTimeout(function(){var e=o.selectionStart,t=o.selectionEnd,n=o.value,n=void 0===n?"":n,r=c(n,e);r===e||0===e&&t===n.length||F(o,r,n),"function"==typeof g&&g(R(R({},a),{currentTarget:u,target:o}))},0)},onBlur:function(e){var t=e.target,n=e.currentTarget;D=null,clearTimeout(C.focusTimeout),clearTimeout(C.setCaretTimeout),"function"==typeof p&&p(R(R({},e),{currentTarget:n,target:t}))}},t));return"text"===o?s.renderText?P.memo(function(){return s.renderText(x(),t)||null}):(e=z(),"function"==typeof(N=s.getInputRef)?P.use(N,e):s.getInputRef=e,P.spread(e,t,!1,!0),P.insert(e,x),e):s.customInput?(a=s.customInput,P.createComponent(a,P.mergeProps(S,{ref:function(e){var t=getInputRef;"function"==typeof t?t(e):getInputRef=e}}))):(o=H(),"function"==typeof(N=s.getInputRef)?P.use(N,o):s.getInputRef=o,P.spread(o,S,!1,!1),o)}function S(e,t){var n,r,a,o,u,l=j(k.splitProps(t,["decimalScale","fixedDecimalScale","prefix","suffix","allowNegative","thousandsGroupStyle"]),2),l=l[0],i=null!=(i=l.prefix)?i:"",c=null!=(c=l.suffix)?c:"";return""!==e&&"-"!==e&&(n=(t=y(t)).thousandSeparator,t=t.decimalSeparator,r=0!==l.decimalScale&&-1!==e.indexOf(".")||l.decimalScale&&l.fixedDecimalScale,a=(u=p(e,l.allowNegative)).beforeDecimal,o=u.afterDecimal,u=u.addNegation,void 0!==l.decimalScale&&(o=f(o,l.decimalScale,!!l.fixedDecimalScale)),n&&(a=A(a,n,null!=(n=l.thousandsGroupStyle)?n:"thousand")),i&&(a=i+a),c&&(o+=c),e=(a=u?"-"+a:a)+(r&&t||"")+o),e}function y(e){var e=j(k.splitProps(e,["decimalSeparator","thousandSeparator","allowedDecimalSeparators"]),2),e=e[0],t=null!=(t=e.decimalSeparator)?t:".";return{decimalSeparator:t,thousandSeparator:e.thousandSeparator?",":"",allowedDecimalSeparators:e.allowedDecimalSeparators?[]:[t,"."]}}function w(e){var t,n,r,a,o,u,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v(e),i=2<arguments.length?arguments[2]:void 0,c=j(k.splitProps(i,["allowNegative","prefix","suffix","decimalScale"]),2),c=c[0],f=null!=(d=c.prefix)?d:"",s=null!=(d=c.suffix)?d:"",d=y(i),i=d.allowedDecimalSeparators,d=d.decimalSeparator,m=e[l.to.end]===d;return e=(!W(e)||e!==f&&e!==s||""!==l.lastValue)&&(l.to.end-l.to.start==1&&-1!==i.indexOf(e[l.to.start])&&(i=0===c.decimalScale?"":d,e=e.substring(0,l.to.start)+i+e.substring(l.to.start+1,e.length)),t=(a=(i=function(e,t,n){var r=!1,a=!1,o=(f.startsWith("-")?r=!1:e.startsWith("--")?a=!(r=!1):s.startsWith("-")&&e.length===s.length?r=!1:"-"===e[0]&&(r=!0),r?1:0);return(o=a?2:o)&&(e=e.substring(o),t-=o,n-=o),{value:e,start:t,end:n,hasNegation:r}})(e,l.to.start,l.to.end)).hasNegation,e=a.value,l.to.start=a.start,l.to.end=a.end,i=(a=i(l.lastValue,l.from.start,l.from.end)).start,u=a.end,a=a.value,n=e.substring(l.to.start,l.to.end),o=0,(e=!(e.length&&a.length&&(i>a.length-s.length||u<f.length))||n&&s.startsWith(n)?e:a).startsWith(f)?o+=f.length:l.to.start<f.length&&(o=l.to.start),e=e.substring(o),l.to.end-=o,i=e.length,u=e.length-s.length,e.endsWith(s)?i=u:(l.to.end>u||l.to.end>e.length-s.length)&&(i=l.to.end),e=e.substring(0,i),r=(e=((e=function(e,t){var e=0<arguments.length&&void 0!==e?e:"",t=1<arguments.length?t:void 0,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),n=n.test(e),r=r.test(e),e=e.replace(/-/g,"");return e=n&&!r&&t?"-"+e:e}(t?"-".concat(e):e,c.allowNegative)).match((n=!0,new RegExp("(^-)|[0-9]|".concat(g(d)),n?"g":void 0)))||[]).join("")).indexOf(d),o=(a=p(e=e.replace(new RegExp(g(d),"g"),function(e,t){return t===r?".":""}),c.allowNegative)).beforeDecimal,u=a.addNegation,l.to.end-l.to.start<l.from.end-l.from.start)&&""===o&&m&&!parseFloat(a.afterDecimal)?u?"-":"":e}function x(e,t){var t=j(k.splitProps(t,["prefix","suffix"]),2),t=t[0],n=null!=(n=t.prefix)?n:"",t=null!=(t=t.suffix)?t:"",r=Array.from({length:e.length+1}).map(function(){return!0}),a="-"===e[0],n=(r.fill(!1,0,n.length+(a?1:0)),e.length);return r.fill(!1,n-t.length+1,n+1),r}function i(n){function e(e){return S(e,n)}function t(){return"function"==typeof i.value?i.value():i.value}function r(e){var t,n,r,a,o,u,l;return!s(e)&&("number"==typeof e&&(e=m(e)),c)&&"number"==typeof i.decimalScale?(t=e,n=i.decimalScale,r=Boolean(i.fixedDecimalScale),-1!==["","-"].indexOf(t)?t:(a=(-1!==t.indexOf(".")||r)&&n,u=(t=p(t)).beforeDecimal,l=t.afterDecimal,t=t.hasNegation,o=parseFloat("0.".concat(l||"0")),l=(l.length<=n?"0.".concat(l):o.toFixed(n)).split("."),(o=u)&&Number(l[0])&&(o=u.split("").reverse().reduce(function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},l[0])),u=f(l[1]||"",n,r),l=a?".":"","".concat(t?"-":"").concat(o).concat(l).concat(u))):e}n=(e=>{var t=(n=y(e)).thousandSeparator,n=n.decimalSeparator,r=(r=j(k.splitProps(e,["prefix","allowNegative"]),2))[0],a=null==(a=r.allowNegative)||a,r=null!=(r=r.prefix)?r:"";if(t===n)throw new Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: ".concat(t,' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: ').concat(n," (default value for decimalSeparator is .)\n     "));return r.startsWith("-")&&a&&(console.error("\n      Prefix can't start with '-' when allowNegative is true.\n      prefix: ".concat(r,"\n      allowNegative: ").concat(a,"\n    ")),a=!1),R(R({},e),{allowNegative:a})})(n);var a,o=k.splitProps(n,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),o=j(o,2),i=o[0],o=o[1],u=null!=(u=i.prefix)?u:"",l=(y(n),d(t())?i.defaultValue:t()),c=null!=(a=i.valueIsNumericString)?a:(a=l,l=u,u=i.suffix,""===a||!(null!=l&&l.match(/\d/)||null!=u&&u.match(/\d/)||"string"!=typeof a||isNaN(Number(a)))),l=(d(t())?d(i.defaultValue)||(c=c||"number"==typeof i.defaultValue):c=c||"number"==typeof t(),j(q(function(){return r(t())},r(i.defaultValue),Boolean(c),e,function(e,t){return w(e,t,n)},i.onValueChange),2)),u=(l[0],l[1]);return R(R({},o),{value:n.value,valueIsNumericString:!1,onValueChange:u,format:e,getCaretBoundary:function(e){return x(e,n)}})}function b(e,t){var n=t.patternChar||"#",r=t.format;if(""===e&&!t.allowEmptyFormatting)return"";for(var a=0,o=r.split(""),u=0,l=r.length;u<l;u++)r[u]===n&&(o[u]=e[a]||h(t.mask,a),a+=1);return o.join("")}function V(e){function a(e){return c[e]===i}function t(e,t){for(var n="",r=0;r<e.length;r++)a(t+r)&&W(e[r])&&(n+=e[r]);return n}function n(e){return e.replace(/[^0-9]/g,"")}var r,o,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:v(e),l=2<arguments.length?arguments[2]:void 0,i=l.patternChar||"#",c=l.format;if(!c.match(/\d/))return n(e);if(""!==u.lastValue&&u.from.end-u.from.start!==u.lastValue.length||e.length!==c.length)return l=u.lastValue.substring(0,u.from.start),r=e.substring(u.to.start,u.to.end),o=u.lastValue.substring(u.from.end),"".concat(t(l,0)).concat(n(r)).concat(t(o,u.from.end));for(var f="",s=0;s<e.length;s++)if(a(s))W(e[s])&&(f+=e[s]);else if(e[s]!==c[s])return n(e);return f}function N(r,a){for(var t=a.format,o=a.patternChar||"#",e=Array.from({length:r.length+1}).map(function(){return!0}),u=0,l=-1,i={},n=(t.split("").forEach(function(e,t){var n=void 0;e===o&&(u++,n=h(a.mask,u-1),-1===l)&&r[t]===n&&(l=t),i[t]=n}),function(e){return t[e]===o&&r[e]!==i[e]}),c=0,f=e.length;c<f;c++)e[c]=c===l||n(c)||n(c-1);return e[t.indexOf(o)]=!0,e}function c(t){var e=j(k.splitProps(t,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar","value","defaultValue","valueIsNumericString"]),2),i=e[0],e=e[1],c=i.format,n=null!=(n=i.inputMode)?n:"numeric",f=null!=(r=i.patternChar)?r:"#",r=t;if(r.mask&&("string"===r.mask?r.mask:r.mask.toString()).match(/\d/g))throw new Error("Mask ".concat(r.mask," should not contain numeric character;"));function s(e){return N(e,t)}var r=d(i.value)?i.defaultValue:i.value,a=null!=(a=i.valueIsNumericString)?a:(a=c,""===(r=r)||!(null!=a&&a.match(/\d/)||"string"!=typeof r||!r.match(/^\d+$/)&&""!==r)),o=R(R({},t),{valueIsNumericString:a});return R(R({},e),{value:i.value,defaultValue:i.defaultValue,valueIsNumericString:a,inputMode:n,format:function(e){return b(e,o)},removeFormatting:function(e,t){return V(e,t,o)},getCaretBoundary:s,onKeyDown:function(e){var t=e.key,n=e.target,r=n.selectionStart,a=n.value;if(r===n.selectionEnd){var o=r;if("Backspace"===t||"Delete"===t){var u="right";if("Backspace"===t){for(;0<o&&c[o-1]!==f;)o--;u="left"}else{for(var l=c.length;o<l&&c[o]!==f;)o++;u="right"}o=U(a,o,s(a),u)}else c[o]!==f&&"ArrowLeft"!==t&&"ArrowRight"!==t&&(o=U(a,o+1,s(a),"right"));o!==r&&L(n,o)}"function"==typeof i.onKeyDown&&i.onKeyDown(e)}})}e.NumberFormatBase=n,e.NumericFormat=function(e){return e=i(e),P.createComponent(n,e)},e.PatternFormat=function(e){return e=c(e),P.createComponent(n,e)},e.getNumericCaretBoundary=x,e.getPatternCaretBoundary=N,e.numericFormatter=S,e.patternFormatter=b,e.removeNumericFormat=w,e.removePatternFormat=V,e.useNumericFormat=i,e.usePatternFormat=c,Object.defineProperty(e,"__esModule",{value:!0})});
